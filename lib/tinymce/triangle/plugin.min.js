tinymce.PluginManager.add('triangle', function(editor, url) {
  // Add a Triangle Graphic
  editor.addButton('triangle', {
    text: '',
    icon: 'arrow-up',
    title: 'Add Triangle',
    onclick: function() {
      // Open window
      editor.windowManager.open({
        title: 'Add a Triangle',
        message: 'They come in any of the available brand colors',
        body: [
          {type: 'listbox',
           name: 'color',
           label: 'Color',
           values: [
            { text: 'Seafoam', value: 'teal' },
            { text: 'Chartreuse', value: 'chartreuse' },
            { text: 'Red', value: 'red' },
            { text: 'Orange', value: 'orange' }
           ]}
        ],
        onsubmit: function(e) {
          var str = e.data.color;
          str = '<figure class="alignnone triangle"><img src="//'+window.location.hostname+'/wp-content/themes/kaw-valley/assets/img/graphic-triangle--'+str+'.svg" alt="" width="80" height="80"></figure>';

          tinyMCE.activeEditor.insertContent(str);
        }
      });
    }
  });
});
